<!-- Chosen Palette: Teal (#00BCD4), Warm Grey (#F5F5F5), Accent Orange (#FF5722), Success Green (#4CAF50) -->
<!-- Application Structure Plan: The SPA is designed as a dynamic, single-page report based on FINGER/EF model. It uses a dashboard approach with thematic tabs (FINGER 5 areas) to break down the dense routine information. The flow is: [Personalized Diagnosis] -> [Interactive Radar Chart] -> [Tabbed FINGER Routines (Content)] -> [Final CTA]. This structure separates diagnosis from solution, enhancing user focus and encouraging exploration of the customized routine. -->
<!-- Visualization & Content Choices: Radar Chart (Chart.js) shows EF strengths/weaknesses dynamically based on URL params (r,s,t,u). This is CRITICAL for personalization. Tabbed Interface (HTML/JS) dynamically updates FINGER routine content based on the diagnosed 'key' (EMOTIONAL, MEMORY, FLEXIBILITY) from the URL, ensuring tailored recommendations. NO SVG/Mermaid. -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‡Œ ì‹¤í–‰ë ¥(EF) ì§„ë‹¨ ë¦¬í¬íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f5f5f5; }
        .chart-container { position: relative; width: 100%; max-width: 400px; margin: 0 auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { max-width: 500px; } }
        .tab-button { transition: all 0.2s ease-in-out; min-width: 25%; }
        .tab-button.active { background-color: #00bcd4; color: white; border-bottom: 2px solid #00bcd4; }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen">
        <!-- Header & Title -->
        <header class="bg-teal-500 py-6 shadow-lg">
            <div class="container mx-auto px-4 text-center">
                <h1 id="report-title" class="text-3xl font-extrabold text-white">
                    ë‡Œ ì‹¤í–‰ë ¥(EF) ì§„ë‹¨ ë¦¬í¬íŠ¸
                </h1>
                <p class="mt-2 text-lg text-teal-100" id="diagnosis-header">
                    ë¸Œë ˆì¸ ê°€ë“  ì •ì›ìŒ¤ì´ ë¶„ì„í•œ ë‹˜ì˜ ë§ì¶¤ EF í”„ë¡œí•„ì…ë‹ˆë‹¤.
                </p>
            </div>
        </header>

        <!-- Main Content Container -->
        <main class="container mx-auto px-4 py-8">
            <!-- 1. Diagnosis Summary -->
            <section id="profile-summary" class="mb-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-teal-100">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">ë‹˜ì˜ ë‡ŒëŠ” <span id="final-diagnosis" class="text-teal-600">ìœ í˜• ë¶„ì„ ì¤‘</span>ìœ¼ë¡œ ì§„ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.</h2>
                    
                    <div id="profile-data-display" class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mt-6">
                        <div class="p-3 bg-red-50 rounded-lg shadow">
                            <p class="text-xs text-red-500 font-semibold uppercase">ê°€ì¥ ì·¨ì•½í•œ EF ì ìˆ˜</p>
                            <p class="text-3xl font-extrabold text-red-600 mt-1" id="weakest-score">4ì </p>
                        </div>
                        <div class="p-3 bg-yellow-50 rounded-lg shadow">
                            <p class="text-xs text-yellow-600 font-semibold uppercase">ê°€ì¥ ì·¨ì•½í•œ EF ì˜ì—­</p>
                            <p class="text-xl font-bold text-yellow-700 mt-1" id="weakest-area">ì‘ì—… ê¸°ì–µ</p>
                        </div>
                        <div class="p-3 bg-blue-50 rounded-lg shadow">
                            <p class="text-xs text-blue-600 font-semibold uppercase">EF ì§„ë‹¨ ìœ í˜•</p>
                            <p class="text-xl font-bold text-blue-700 mt-1" id="diagnosis-type-name">ìœ í˜• ë¶„ì„ ì¤‘</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. Profile and Interpretation -->
            <section id="profile-interpretation" class="mb-10 grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-xl font-bold mb-3 text-gray-700">EF í”„ë¡œí•„ ë ˆì´ë” ë¶„ì„</h3>
                    <p class="text-sm text-gray-500 mb-4">4ê°€ì§€ í•µì‹¬ ì˜ì—­ì˜ ìƒëŒ€ì ì¸ ê°•ë„ë¥¼ ì‹œê°í™”í–ˆìŠµë‹ˆë‹¤. ì ìˆ˜ê°€ ë‚®ì„ìˆ˜ë¡ ê°œì„ ì„ í†µí•´ ì§‘ì¤‘ì ìœ¼ë¡œ ê°œì„ í•´ì•¼ í•  ì˜ì—­ì…ë‹ˆë‹¤.</p>
                    <div class="chart-container">
                        <canvas id="efRadarChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                    <h3 class="text-xl font-bold mb-3 text-gray-700">ì§„ë‹¨ ìœ í˜•ë³„ í•µì‹¬ í•´ì„</h3>
                    <div id="diagnosis-interpretation" class="mt-4 space-y-4">
                        <div id="error-message" class="p-3 bg-red-100 text-red-700 rounded-lg font-semibold hidden">
                            ë¶„ì„ì„ ìœ„í•´ ìœ íš¨í•œ EF ì ìˆ˜ ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.
                        </div>

                        <div id="coach-comment" class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                            <p class="font-bold text-yellow-800">â­ ì½”ì¹˜ COMMENT</p>
                            <p class="text-sm text-gray-700 mt-1" id="coach-text">EFëŠ” í›ˆë ¨ì„ í†µí•´ ê°•ë ¥íˆ ê°•í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹˜ì˜ ê°•ì ì„ í™œìš©í•˜ì—¬ ì•½ì ì„ ê·¹ë³µí•˜ëŠ” ë§ì¶¤ ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                        </div>

                        <div id="weakness-interpretation" class="text-gray-700">
                            <!-- JS will inject personalized weakness analysis here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. FINGER Custom Routine -->
            <section id="routine-plan" class="mb-10">
                <h2 class="text-2xl font-extrabold text-teal-700 mb-5 border-b-2 pb-2">ìœ í˜•ë³„ FINGER ë§ì¶¤ ë£¨í‹´ ëª©í‘œ</h2>
                <p class="text-gray-600 mb-5">ì§„ë‹¨ëœ EF ìœ í˜•ì— ë§ì¶°, ì¹˜ë§¤ ì˜ˆë°©ì˜ êµ­ì œ í‘œì¤€ì¸ FINGER ëª¨ë¸ ê¸°ë°˜ì˜ 5ëŒ€ ì˜ì—­ë³„ **í•µì‹¬ ë£¨í‹´ ëª©í‘œ**ë¥¼ ì œì‹œí•©ë‹ˆë‹¤. ì±Œë¦°ì§€ì—ì„œëŠ” ì´ ëª©í‘œë¥¼ ë‹¬ì„±í•  **"4ì£¼ ì‹¤í–‰ ìŠ¤ì¼€ì¤„"**ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
                
                <div class="bg-white rounded-xl shadow-xl overflow-hidden">
                    <!-- Tab Buttons -->
                    <div id="routine-tabs" class="flex justify-between border-b bg-gray-50 p-2">
                        <!-- Buttons injected by JS based on efData -->
                    </div>
                    
                    <!-- Tab Content -->
                    <div id="routine-content" class="p-6">
                        <div id="routine-error" class="p-4 bg-red-100 text-red-700 rounded-lg font-semibold hidden">
                            ë¶„ì„ì„ ìœ„í•´ ìœ íš¨í•œ EF ì ìˆ˜ ë°ì´í„°ê°€ í•„ìš”í•©ë‹ˆë‹¤.
                        </div>
                        <div id="routine-details">
                            <!-- Routine details injected by JS -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- 4. Disclaimer -->
            <section id="disclaimer" class="mb-8">
                <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg text-sm text-gray-700">
                    <h4 class="font-bold text-red-600 mb-2">âš ï¸ ì§„ë‹¨ í…ŒìŠ¤íŠ¸ ìœ ì˜ì‚¬í•­ ë° ë©´ì±… ê³ ì§€</h4>
                    <p class="mb-1">
                        <strong>1. ì§„ë‹¨ ëª©ì ì˜ í•œê³„:</strong> ë³¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ” ì˜í•™ì ì¸ ì§„ë‹¨, ì¹˜ë£Œ, ë˜ëŠ” ì „ë¬¸ê°€ì˜ ì†Œê²¬ì„ ëŒ€ì²´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë§Œì•½ ì‹¬ê°í•œ ì¸ì§€ì  ì–´ë ¤ì›€ì´ë‚˜ ì •ì„œì  ë¬¸ì œê°€ ì˜ì‹¬ë˜ëŠ” ê²½ìš°, ë°˜ë“œì‹œ ì „ë¬¸ ì˜ë£Œê¸°ê´€ì„ ë°©ë¬¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.
                    </p>
                    <p class="mb-1">
                        <strong>2. ë°ì´í„° ê¸°ë°˜ ë¶„ì„:</strong> ë³¸ ë¦¬í¬íŠ¸ëŠ” ì‘ë‹µí•˜ì‹  12ê°œ ë¬¸í•­ì˜ EF ì˜ì—­ë³„ ì ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ 'ê°€ì¥ ì·¨ì•½í•œ í–‰ë™ íŒ¨í„´'ì„ ì§„ë‹¨í•˜ì—¬ ìœ í˜•ì„ ë¶„ë¥˜í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ê°œì¸ì˜ ì£¼ê´€ì ì¸ ì»¨ë””ì…˜ì´ë‚˜ ë³µí•©ì ì¸ ì‹¬ë¦¬ì  ìš”ì¸ì´ ëª¨ë‘ ë°˜ì˜ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (âš¡ï¸ ì‹¬í™” ìœ ë£Œ ë²„ì „ì€ ë” ìì„¸í•œ ë¬¸í•­ê³¼ ì „í™” ìƒë‹´ìœ¼ë¡œ ë³´ë‹¤ ì„¬ì„¸í•˜ê²Œ ë°˜ì˜ë©ë‹ˆë‹¤.)
                    </p>
                    <p class="mb-1">
                        <strong>3. ì •ë³´ì˜ í™œìš©:</strong> ë¦¬í¬íŠ¸ì— ì œì‹œëœ FINGER ë£¨í‹´ ë° ì½”ì¹­ ë©”ì‹œì§€ëŠ” ê±´ê°•í•œ ìŠµê´€ í˜•ì„±ì„ ìœ„í•œ ê°€ì´ë“œë¼ì¸ì´ë©°, ì´ë¥¼ ë¬´ë‹¨ìœ¼ë¡œ í™œìš©í•˜ì—¬ ë°œìƒí•˜ëŠ” ê²°ê³¼ì— ëŒ€í•´ ë¸Œë ˆì¸ ê°€ë“ ì€ ë²•ì  ì±…ì„ì„ ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </p>
                    <p class="mt-3 font-bold text-teal-700">
                        ë³¸ ë¬´ë£Œ í…ŒìŠ¤íŠ¸ëŠ” ì´ë©”ì¼ ì£¼ì†Œë‹¹ ë‹¨ í•œ ë²ˆì˜ ê²°ê³¼ë§Œì„ ì œê³µí•©ë‹ˆë‹¤. ì •í™•í•œ ì§„ë‹¨ì„ ìœ„í•´ ì‹ ì¤‘í•˜ê²Œ ë‹µë³€í•´ ì£¼ì‹­ì‹œì˜¤.
                    </p>
                </div>
            </section>

            <!-- 5. Final CTA -->
            <section id="final-cta" class="bg-teal-600 p-8 rounded-xl shadow-2xl text-center text-white">
                <h2 class="text-3xl font-extrabold mb-4">ë‹˜ì˜ ì§„ë‹¨ ê²°ê³¼ë¥¼ 'í‰ìƒ ìŠµê´€'ìœ¼ë¡œ ë°”ê¾¸ì„¸ìš”!</h2>
                <p class="text-lg mb-6">ë¬´ë£Œ ì§„ë‹¨ì€ ì‹œì‘ì¼ ë¿ì…ë‹ˆë‹¤. **4ì£¼ ì±Œë¦°ì§€**ë¥¼ í†µí•´ ë‹˜ì˜ ìœ í˜•ì— ë”± ë§ëŠ” **"ì‹¤í–‰ë ¥ì´ ì‘ë™í•˜ëŠ” 4ì£¼ ìŠ¤ì¼€ì¤„"**ì„ ì™„ì„±í•˜ì„¸ìš”.</p>
                <!-- NOTE: URL ë§í¬ë¥¼ ê³ ê°ë‹˜ì´ ì œê³µí•œ ìµœì‹  ë¸”ë¡œê·¸ ì£¼ì†Œë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. -->
                <a href="https://blog.naver.com/brain_garden/224047447360" class="inline-block bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-6 rounded-lg shadow-xl transition duration-300 transform hover:scale-105">
                    4ì£¼ ì±Œë¦°ì§€ ì‹¤í–‰ ìŠ¤ì¼€ì¤„ í™•ì¸ ë° ë“±ë¡í•˜ê¸°
                </a>
            </section>
        </main>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // EF Data and Routine Definition (Simulating a database)
        const efData = [
            {
                key: 'EMOTIONAL',
                name: 'âš¡ï¸ ê°ì •ì  ë¯¸ë£¨ê¸°í˜•',
                weakness: 'ì–µì œ í†µì œ',
                explanation: 'ë‹˜ì˜ ë¬¸ì œëŠ” "ì‹¤í–‰ ìˆœê°„ì˜ ë¶ˆì•ˆ, ë‘ë ¤ì›€"ê³¼ ê°™ì€ ê°ì •ì  ì¶©ë™ì— êµ´ë³µí•˜ì—¬ í–‰ë™ì„ ë¯¸ë£¨ëŠ” ê²ƒì…ë‹ˆë‹¤. í›Œë¥­í•œ ê³„íšì„ ì„¸ì›Œë„ ì‹¬ë¦¬ì  ì—ë„ˆì§€ê°€ ì†Œì§„ë˜ì–´ ì²«ê±¸ìŒì„ ë©ˆì¶¥ë‹ˆë‹¤. ë‡Œì˜ ë¸Œë ˆì´í¬ í›ˆë ¨ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                routines: {
                    ì‹ë‹¨: 'ì†ŒëŸ‰ ë‹¤ë¹ˆë„, ì €í˜ˆë‹¹ì§€ìˆ˜(Low GI) ì‹ë‹¨ìœ¼ë¡œ í˜ˆë‹¹ì„ ì•ˆì •í™”í•˜ì—¬ ê°ì • ê¸°ë³µì„ ìµœì†Œí™”í•©ë‹ˆë‹¤. íŠ¹íˆ íŠ¸ë¦½í† íŒê³¼ ë§ˆê·¸ë„¤ìŠ˜ì´ í’ë¶€í•œ ì‹í’ˆ(ë‹­ê°€ìŠ´ì‚´, ê²¬ê³¼ë¥˜)ì„ ì„­ì·¨í•˜ì—¬ ê¸°ë¶„ ì•ˆì •ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.',
                    ì‹ ì²´í™œë™: 'ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¦‰ì‹œ í•´ì†Œí•  ìˆ˜ ìˆëŠ” ì§§ì€ ë§ˆìŒì±™ê¹€ ìš´ë™(ëª…ìƒ, í˜¸í¡ë²•)ì„ ë£¨í‹´ì— í¬í•¨í•©ë‹ˆë‹¤. ê²©ë ¬í•œ ìš´ë™ ëŒ€ì‹  ìš”ê°€, íƒœê·¹ê¶Œ ë“± ì´ì™„ ìš´ë™ì„ í†µí•´ ì •ì„œì  ì•ˆì •ì„ ìš°ì„ í•©ë‹ˆë‹¤.',
                    ì¸ì§€í™œë™: 'ì§‘ì¤‘ë ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ì§§ì€ ë§ˆì¸ë“œí’€ë‹ˆìŠ¤ ëª…ìƒì„ ë£¨í‹´ì— í¬í•¨í•©ë‹ˆë‹¤. ë³µì¡í•œ ì¸ì§€ ê³¼ì œëŠ” í”¼í•˜ê³ , ì§§ê³  ì„±ì·¨ê°ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ê²Œì„ì´ë‚˜ ì»¬ëŸ¬ë§ë¶ìœ¼ë¡œ ë‡Œì˜ ë¶€ë‹´ì„ ì¤„ì…ë‹ˆë‹¤.',
                    ì‚¬íšŒí™œë™: 'ê°ˆë“±ê³¼ ìê·¹ì„ í”¼í•˜ëŠ” ì•ˆì „í•˜ê³  ì†Œê·œëª¨ì˜ ê´€ê³„ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ê°€ì¡±, ì¹œêµ¬ì™€ ê°ì •ì„ ê³µìœ í•˜ëŠ” ëª¨ì„ì„ ì£¼ 1íšŒ ê°€ì§€ë©°, ì •ì„œì  ì§€ì§€ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.',
                    ìœ„í—˜ìš”ì¸ê´€ë¦¬: 'ë§¤ì¼ ì•„ì¹¨/ì €ë… í˜ˆì••ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€(1~10ì )ì„ ê¸°ë¡í•˜ì—¬ ê°ì • ë³€í™”ì™€ ì‹ ì²´ ë°˜ì‘ì˜ ì—°ê´€ì„±ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , ë§Œì„± ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì— ì§‘ì¤‘í•©ë‹ˆë‹¤.'
                }
            },
            {
                key: 'MEMORY',
                name: 'ğŸ§  ì‹¤í–‰ ì—°ê²° ë¶ˆì•ˆí˜•',
                weakness: 'ì‘ì—… ê¸°ì–µ',
                explanation: 'ë‹˜ì€ ê³„íš(ì„¤ê³„)ì€ ì˜í•˜ì§€ë§Œ, ì‹¤í–‰ ë‹¨ê³„ì—ì„œ "ë‹¤ìŒ ìˆœì„œ"ë‚˜ "ëª©í‘œ"ë¥¼ ìˆœê°„ì ìœ¼ë¡œ ë†“ì³ ì‹¤í–‰ ì—°ê²°ì´ ëŠê¹ë‹ˆë‹¤. ë‡Œì˜ ë©”ëª¨ì¥ ìš©ëŸ‰ì´ ì‘ì•„ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ìœ ì§€í•˜ê³  ì¡°ì‘í•˜ëŠ” ë° ì–´ë ¤ì›€ì„ ê²ªìŠµë‹ˆë‹¤.',
                routines: {
                    ì‹ë‹¨: 'ì˜¤ë©”ê°€-3, ì½œë¦° ë“± ë‡Œ ì‹ ê²½ì„¸í¬ì— í•„ìˆ˜ì ì¸ ì˜ì–‘ì†Œê°€ í’ë¶€í•œ ë“±í‘¸ë¥¸ ìƒì„ ê³¼ ë‹¬ê±€ì„ ë§¤ì¼ ì„­ì·¨í•©ë‹ˆë‹¤. ë‡Œ ê¸°ëŠ¥ì„ ìµœëŒ€í™”í•˜ê¸° ìœ„í•´ ê·œì¹™ì ì´ê³  ë°˜ë³µì ì¸ ì‹ì‚¬ ì‹œê°„ì„ ìœ ì§€í•©ë‹ˆë‹¤.',
                    ì‹ ì²´í™œë™: 'ìš´ë™ê³¼ ì¸ì§€ ê³¼ì œë¥¼ ê²°í•©í•˜ëŠ” "ë“€ì–¼íƒœìŠ¤í¬(Dual-Task)" í›ˆë ¨ì„ ë°˜ë“œì‹œ ì‹¤ì‹œí•©ë‹ˆë‹¤. (ì˜ˆ: ê±·ê¸°ì™€ 7ì˜ ë°°ìˆ˜ ê±°ê¾¸ë¡œ ì„¸ê¸°ë¥¼ ë™ì‹œì— ì§„í–‰) ì´ëŠ” ì‘ì—… ê¸°ì–µê³¼ ì‹¤í–‰ë ¥ì„ ë™ì‹œì— ê°•í™”í•©ë‹ˆë‹¤.',
                    ì¸ì§€í™œë™: 'N-back ê²Œì„, ë‹¨ì–´ ì—­ìˆœ ì™¸ìš°ê¸° ë“± ì‘ì—… ê¸°ì–µ ìš©ëŸ‰ì„ ëŠ˜ë¦¬ëŠ” í›ˆë ¨ì„ ì§‘ì¤‘ì ìœ¼ë¡œ í•©ë‹ˆë‹¤. ëª¨ë“  ê³„íšì„ ì‹œê°ì ì¸ ëª©ë¡(ì²´í¬ë¦¬ìŠ¤íŠ¸)ìœ¼ë¡œ ì‘ì„±í•˜ì—¬ ë‡Œì˜ ë¶€ë‹´ì„ ì¤„ì…ë‹ˆë‹¤.',
                    ì‚¬íšŒí™œë™: 'ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚˜ëŠ” ê²ƒë³´ë‹¤ ìµìˆ™í•œ ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ìœ ì§€í•˜ë©° ì•ˆì •ê°ì„ ì°¾ìŠµë‹ˆë‹¤. ëŒ€í™” ì‹œ ë“¤ì€ ë‚´ìš©ì„ ìš”ì•½í•˜ì—¬ ë§í•˜ëŠ” í›ˆë ¨ì„ í†µí•´ ì‘ì—… ê¸°ì–µì„ í™œìš©í•©ë‹ˆë‹¤.',
                    ìœ„í—˜ìš”ì¸ê´€ë¦¬: 'ê·œì¹™ì ì¸ ìˆ˜ë©´ íŒ¨í„´ì„ ìœ ì§€í•˜ê³  ìˆ˜ë©´ì˜ ì§ˆì„ ê´€ë¦¬í•©ë‹ˆë‹¤. ìˆ˜ë©´ì€ ì‘ì—… ê¸°ì–µì„ ì •ë¦¬í•˜ê³  ê°•í™”í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì‹œê°„ì…ë‹ˆë‹¤.'
                }
            },
            {
                key: 'FLEXIBILITY',
                name: 'ğŸ” ë³€í™” ì €í•­í˜•',
                weakness: 'ì¸ì§€ ìœ ì—°ì„±',
                explanation: 'ë‹˜ì€ ìƒˆë¡œìš´ ìƒí™©ì´ë‚˜ ë°©ì‹ì— ëŒ€í•œ ì‹¬ë¦¬ì  ì €í•­ì´ ë§¤ìš° ê°•í•©ë‹ˆë‹¤. ì™„ë²½ì£¼ì˜ ì„±í–¥ê³¼ ê²°í•©í•˜ì—¬ ì‘ì€ ì‹¤ìˆ˜ë‚˜ ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ë©°, ì´ê²ƒì´ ìƒˆë¡œìš´ ë£¨í‹´ ì‹œì‘ì„ ë§‰ëŠ” ì¥ì• ë¬¼ì´ ë©ë‹ˆë‹¤.',
                routines: {
                    ì‹ë‹¨: 'ë§¤ì£¼ í•œ ë²ˆì”© ë‚¯ì„  ë‚˜ë¼ì˜ ê±´ê°• ë ˆì‹œí”¼ë¥¼ ì‹œë„í•©ë‹ˆë‹¤. ì´ëŠ” ë‡Œì— ìƒˆë¡œìš´ ìê·¹ê³¼ ìœ ì—°ì„±ì„ ì œê³µí•©ë‹ˆë‹¤. í‰ì†Œ ë¨¹ì§€ ì•Šë˜ ì»¬ëŸ¬ì˜ ì±„ì†Œ(ë³´ë¼ìƒ‰, ë…¸ë€ìƒ‰)ë¥¼ ì˜ë„ì ìœ¼ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.',
                    ì‹ ì²´í™œë™: 'ìµìˆ™í•œ ê²½ë¡œë¥¼ ë²—ì–´ë‚˜ ìƒˆë¡œìš´ ê¸¸ë¡œ ì‚°ì±…í•˜ê±°ë‚˜, ëŒ„ìŠ¤ë‚˜ ì—ì–´ë¡œë¹…ì²˜ëŸ¼ ë³µì¡í•˜ê³  ë¹ ë¥¸ ë™ì‘ì„ ìš”êµ¬í•˜ëŠ” í™œë™ì„ ì‹œë„í•˜ì—¬ ë‡Œì˜ ì „í™˜ ìŠ¤ìœ„ì¹˜ë¥¼ í›ˆë ¨í•©ë‹ˆë‹¤.',
                    ì¸ì§€í™œë™: 'ì „ëµ ê²Œì„(ì²´ìŠ¤, ë°”ë‘‘)ì„ í•˜ë˜, "ë°˜ë“œì‹œ ì´ê²¨ì•¼ í•œë‹¤"ëŠ” ë¶€ë‹´ì„ ë²„ë¦¬ê³  "ìƒˆë¡œìš´ ì „ëµì„ ì‹œë„"í•˜ëŠ” ê²ƒì— ì´ˆì ì„ ë§ì¶¥ë‹ˆë‹¤. ë¬¸ì œ í•´ê²° ì‹œ ì—¬ëŸ¬ ê°€ì§€ ê´€ì ìœ¼ë¡œ ë³´ëŠ” í•˜ë¸Œë£¨íƒ€ í† ë¡ ì„ ì‹œë„í•©ë‹ˆë‹¤.',
                    ì‚¬íšŒí™œë™: 'ìƒˆë¡œìš´ ë¶„ì•¼ì˜ ë™í˜¸íšŒë‚˜ ëª¨ì„ì— ê°€ì…í•˜ì—¬ ë‚¯ì„  ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•©ë‹ˆë‹¤. ë©˜í† ë§ í™œë™ ë“±ì„ í†µí•´ ìì‹ ì˜ ê²½í—˜ì„ ë‹¤ë¥¸ ê´€ì ì—ì„œ ë°”ë¼ë³´ëŠ” ê¸°íšŒë¥¼ ê°€ì§‘ë‹ˆë‹¤.',
                    ìœ„í—˜ìš”ì¸ê´€ë¦¬: 'ê³¼ë„í•œ ëª©í‘œ ì„¤ì •ì„ í”¼í•˜ê³ , "ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤"ëŠ” ë§ˆìŒê°€ì§ì„ ê°–ìŠµë‹ˆë‹¤. ë§¤ì£¼ ì‘ì€ ëª©í‘œë¥¼ ì„¤ì •í•˜ê³  ë‹¬ì„±í•˜ë©° ë‡Œì˜ ë³€í™” ì €í•­ì„ ì ì§„ì ìœ¼ë¡œ í•´ì²´í•©ë‹ˆë‹¤.'
                }
            }
        ];

        let efScores = [3, 3, 3, 3]; // Default scores
        let weakestAreaKey = 'MEMORY';
        let weakestAreaName = 'ì‘ì—… ê¸°ì–µ';
        let userName = '';
        let diagnosedType = efData[1]; // Default to MEMORY type

        // --- 1. URL íŒŒë¼ë¯¸í„° ì½ê¸° ë° ë°ì´í„° ê²€ì¦ ---
        function getUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // ì´ë¦„ ë””ì½”ë”© ë° ì„¤ì •
            const nameParam = urlParams.get('n');
            if (nameParam) {
                userName = decodeURIComponent(nameParam.replace(/\+/g, ' '));
                document.getElementById('report-title').innerHTML = `${userName}ë‹˜ì„ ìœ„í•œ ë‡Œ ì‹¤í–‰ë ¥(EF) ì§„ë‹¨ ë¦¬í¬íŠ¸`;
                document.getElementById('diagnosis-header').textContent = `ë¸Œë ˆì¸ ê°€ë“  ì •ì›ìŒ¤ì´ ë¶„ì„í•œ ${userName}ë‹˜ì˜ ë§ì¶¤ EF í”„ë¡œí•„ì…ë‹ˆë‹¤.`;
            } else {
                userName = 'OOO';
            }

            // ì ìˆ˜ ë° í‚¤ ê²€ì¦
            const r = parseFloat(urlParams.get('r'));
            const s = parseFloat(urlParams.get('s'));
            const t = parseFloat(urlParams.get('t'));
            const u = parseFloat(urlParams.get('u'));
            const key = urlParams.get('key');
            
            // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ (ì ìˆ˜ê°€ NaNì´ ì•„ë‹ˆë©° 1.0 ì´ìƒì¸ ê²½ìš°ë§Œ ìœ íš¨)
            // if (r >= 1 && s >= 1 && t >= 1 && u >= 1) ëŒ€ì‹  isValidData ë³€ìˆ˜ ì‚¬ìš©
            const isValidData = !isNaN(r) && !isNaN(s) && !isNaN(t) && !isNaN(u) && r >= 1 && s >= 1 && t >= 1 && u >= 1;

            if (isValidData && key) {
                // ë°ì´í„° ìœ íš¨: ì ìˆ˜ ë° í‚¤ ì ìš©
                // ì£¼ì˜: URL ìˆœì„œ: r, s, t, u
                // ì°¨íŠ¸ ìˆœì„œ: ì–µì œ(r), ê³„íš(u), ìœ ì—°ì„±(t), ê¸°ì–µ(s)
                efScores = [r, u, t, s]; 
                weakestAreaKey = key;

                // ìµœì €ì  ë° ìœ í˜• ì°¾ê¸°
                const scoreMap = { 'EMOTIONAL': r, 'MEMORY': s, 'FLEXIBILITY': t, 'PLANNING': u };
                let minScore = 5.0;
                let weakestKey = '';

                // ìµœì €ì ê³¼ ê·¸ ì´ë¦„ì„ ì°¾ìŠµë‹ˆë‹¤.
                Object.keys(scoreMap).forEach(k => {
                    // ìµœì €ì  ì—…ë°ì´íŠ¸ (ë™ì ì¼ ê²½ìš° ë§ˆì§€ë§‰ í‚¤ê°€ ì„ íƒë¨)
                    if (scoreMap[k] <= minScore) { 
                        minScore = scoreMap[k];
                        weakestKey = k;
                    }
                });
                
                // ì§„ë‹¨ëœ ìœ í˜• ì°¾ê¸° (ìµœì €ì  ì˜ì—­ ê¸°ì¤€)
                // Vì—´ì—ì„œ ê°€ì ¸ì˜¨ keyë¥¼ efDataì—ì„œ ì°¾ìŠµë‹ˆë‹¤.
                diagnosedType = efData.find(d => d.key === key); 
                
                // keyë¥¼ ì°¾ì§€ ëª»í–ˆê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ EMOTIONALë¡œ fallback
                if (!diagnosedType) {
                    diagnosedType = efData[0]; // Fallback to EMOTIONAL
                    // console.error(`Error: Key "${key}" not found. Falling back.`);
                }

                document.getElementById('weakest-score').textContent = minScore.toFixed(2) + 'ì ';
                document.getElementById('weakest-area').textContent = getAreaName(weakestKey); // ìµœì €ì  ì˜ì—­ ì´ë¦„ì€ minKey ê¸°ì¤€
                document.getElementById('diagnosis-type-name').textContent = diagnosedType.name;
                document.getElementById('final-diagnosis').textContent = diagnosedType.name;

                // ë°ì´í„° í‘œê°€ ì •ìƒì ìœ¼ë¡œ ë‚˜ì˜¤ê²Œ ì„¤ì •
                document.getElementById('profile-data-display').style.display = 'grid'; 

                // ì˜¤ë¥˜ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
                document.getElementById('error-message').classList.add('hidden');
                document.getElementById('routine-error').classList.add('hidden');


                // Weakness Interpretation Injection
                const weaknessInterpretation = document.getElementById('weakness-interpretation');
                weaknessInterpretation.innerHTML = `
                    <p class="font-semibold text-gray-800">ì§„ë‹¨ ìš”ì•½:</p>
                    <p class="text-sm mt-1">${diagnosedType.explanation}</p>
                `;


                return true;
            } else {
                // ë°ì´í„° ë¬´íš¨: ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
                document.getElementById('error-message').classList.remove('hidden');
                document.getElementById('routine-error').classList.remove('hidden');
                
                document.getElementById('weakest-score').textContent = 'ë¶„ì„ ì¤‘';
                document.getElementById('weakest-area').textContent = 'ë¶„ì„ ì¤‘';
                document.getElementById('diagnosis-type-name').textContent = 'ë¶„ì„ ì¤‘';
                document.getElementById('final-diagnosis').textContent = 'ìœ í˜• ë¶„ì„ ì¤‘';
                document.getElementById('profile-data-display').style.display = 'none'; // ë°ì´í„° ì°½ ìˆ¨ê¸°ê¸°
                document.getElementById('weakness-interpretation').innerHTML = `<p class="text-red-600 font-semibold mt-2">URL ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•Šì•„ ê¸°ë³¸ ë¶„ì„ë§Œ ì œê³µë©ë‹ˆë‹¤.</p>`;
                return false;
            }
        }

        function getAreaName(key) {
            switch (key) {
                case 'EMOTIONAL': return 'ì–µì œ í†µì œ';
                case 'MEMORY': return 'ì‘ì—… ê¸°ì–µ';
                case 'FLEXIBILITY': return 'ì¸ì§€ ìœ ì—°ì„±';
                case 'PLANNING': return 'ê³„íš/ì¡°ì§';
                default: return 'ë¯¸ì •';
            }
        }

        // --- 2. Chart Drawing ---
        function drawRadarChart() {
            const ctx = document.getElementById('efRadarChart').getContext('2d');

            // ì ìˆ˜ ì—­ì‚° (ë†’ì€ ì ìˆ˜ê°€ ë°”ê¹¥ìœ¼ë¡œ ê°€ë„ë¡ 5ì  ë§Œì ì—ì„œ ì—­ì‚°)
            const chartData = efScores.map(score => score); 

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['ì–µì œ í†µì œ', 'ê³„íš/ì¡°ì§', 'ì¸ì§€ ìœ ì—°ì„±', 'ì‘ì—… ê¸°ì–µ'],
                    datasets: [{
                        label: 'ë‚˜ì˜ EF í”„ë¡œí•„',
                        data: chartData,
                        backgroundColor: 'rgba(0, 188, 212, 0.2)', // Teal 400
                        borderColor: 'rgba(0, 188, 212, 1)',
                        pointBackgroundColor: 'rgba(255, 87, 34, 1)', // Orange accent
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(255, 87, 34, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(150, 150, 150, 0.4)' },
                            grid: { color: 'rgba(150, 150, 150, 0.4)' },
                            suggestedMin: 1,
                            suggestedMax: 5,
                            ticks: { display: false, stepSize: 1 },
                            pointLabels: {
                                font: { size: 12, weight: 'bold' },
                                color: '#333'
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (context) => `${context.dataset.label}: ${context.raw.toFixed(2)}ì ` } }
                    }
                }
            });
        }

        // --- 3. Routine Content Injection ---
        function injectRoutineContent(type) {
            document.getElementById('coach-text').textContent = type.explanation;

            const tabsContainer = document.getElementById('routine-tabs');
            const contentContainer = document.getElementById('routine-details');
            tabsContainer.innerHTML = '';
            contentContainer.innerHTML = '';
            
            let firstKey = '';

            Object.keys(type.routines).forEach((key, index) => {
                if (index === 0) firstKey = key;
                
                const button = document.createElement('button');
                button.className = `tab-button px-4 py-2 text-sm font-semibold rounded-t-lg transition duration-150 ease-in-out hover:bg-teal-100 ${index === 0 ? 'active' : ''}`;
                button.textContent = key;
                button.setAttribute('data-target', key);
                
                button.onclick = () => {
                    // Remove active class from all buttons
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    // Add active class to the clicked button
                    button.classList.add('active');
                    // Update content
                    contentContainer.innerHTML = `<p class="text-gray-700">${type.routines[key]}</p>`;
                };
                tabsContainer.appendChild(button);
            });

            // Initial content display
            if (firstKey) {
                contentContainer.innerHTML = `<p class="text-gray-700">${type.routines[firstKey]}</p>`;
            }
        }


        // --- Main Execution ---
        document.addEventListener('DOMContentLoaded', () => {
            const dataIsValid = getUrlParams();
            
            if (dataIsValid) {
                drawRadarChart();
                injectRoutineContent(diagnosedType);
            }
        });
    </script>
</body>
</html>
